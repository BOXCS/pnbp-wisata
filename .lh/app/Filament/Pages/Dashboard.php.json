{
    "sourceFile": "app/Filament/Pages/Dashboard.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1754704211644,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1754704211644,
            "name": "Commit-0",
            "content": "<?php\r\n\r\nnamespace App\\Filament\\Pages;\r\n\r\nuse App\\Models\\Culture;\r\nuse App\\Models\\Facility;\r\n// use App\\Models\\Gallery;\r\n// use App\\Models\\Package;\r\n// use App\\Models\\Product;\r\nuse App\\Models\\GalleryCategory;\r\nuse App\\Models\\Packages;\r\nuse App\\Models\\Products;\r\nuse Filament\\Pages\\Dashboard as BaseDashboard;\r\nuse Filament\\Widgets\\StatsOverviewWidget;\r\nuse Filament\\Widgets\\StatsOverviewWidget\\Card;\r\nuse Filament\\Widgets\\TableWidget;\r\nuse Filament\\Tables;\r\nuse Filament\\Tables\\Table;\r\nuse Filament\\Widgets\\ChartWidget;\r\nuse Carbon\\Carbon;\r\n\r\nclass Dashboard extends BaseDashboard\r\n{\r\n    protected function getHeaderWidgets(): array\r\n    {\r\n        return [\r\n            DashboardStats::class,\r\n            DataTrendChart::class,\r\n            RecentCultures::class,\r\n        ];\r\n    }\r\n}\r\n\r\n// 1️⃣ Statistik jumlah data\r\nclass DashboardStats extends StatsOverviewWidget\r\n{\r\n    protected function getCards(): array\r\n    {\r\n        return [\r\n            Card::make('Total Cultures', Culture::count())\r\n                ->description('Jumlah budaya')\r\n                ->icon('heroicon-o-sparkles')\r\n                ->color('success'),\r\n\r\n            Card::make('Total Facilities', Facility::count())\r\n                ->description('Jumlah fasilitas')\r\n                ->icon('heroicon-o-building-office')\r\n                ->color('primary'),\r\n\r\n            Card::make('Total Galleries', GalleryCategory::count())\r\n                ->description('Jumlah galeri')\r\n                ->icon('heroicon-o-photo')\r\n                ->color('info'),\r\n\r\n            Card::make('Total Packages', Packages::count())\r\n                ->description('Jumlah paket wisata')\r\n                ->icon('heroicon-o-archive-box')\r\n                ->color('warning'),\r\n\r\n            Card::make('Total Products', Products::count())\r\n                ->description('Jumlah produk')\r\n                ->icon('heroicon-o-cube')\r\n                ->color('danger'),\r\n        ];\r\n    }\r\n}\r\n\r\n// 2️⃣ Grafik tren data per bulan\r\nclass DataTrendChart extends ChartWidget\r\n{\r\n    protected static ?string $heading = 'Tren Penambahan Data per Bulan';\r\n    protected int|string|array $columnSpan = 'full';\r\n\r\n    protected function getData(): array\r\n    {\r\n        $months = collect(range(1, 12))->map(function ($month) {\r\n            return Carbon::create(null, $month)->format('M');\r\n        })->toArray();\r\n\r\n        $cultureData = [];\r\n        $packageData = [];\r\n\r\n        foreach (range(1, 12) as $month) {\r\n            $cultureData[] = Culture::whereMonth('created_at', $month)->count();\r\n            // $packageData[] = Package::whereMonth('created_at', $month)->count();\r\n        }\r\n\r\n        return [\r\n            'datasets' => [\r\n                [\r\n                    'label' => 'Cultures',\r\n                    'data' => $cultureData,\r\n                    'borderColor' => '#10B981',\r\n                    'backgroundColor' => '#10B981',\r\n                ],\r\n                [\r\n                    'label' => 'Packages',\r\n                    'data' => $packageData,\r\n                    'borderColor' => '#F59E0B',\r\n                    'backgroundColor' => '#F59E0B',\r\n                ],\r\n            ],\r\n            'labels' => $months,\r\n        ];\r\n    }\r\n\r\n    protected function getType(): string\r\n    {\r\n        return 'line';\r\n    }\r\n}\r\n\r\n// 3️⃣ Tabel data terbaru\r\nclass RecentCultures extends TableWidget\r\n{\r\n    protected static ?string $heading = 'Budaya Terbaru';\r\n\r\n    public function table(Table $table): Table\r\n    {\r\n        return $table\r\n            ->query(Culture::query()->latest()->limit(5))\r\n            ->columns([\r\n                Tables\\Columns\\TextColumn::make('name')->label('Nama'),\r\n                Tables\\Columns\\ImageColumn::make('image')->label('Gambar'),\r\n                Tables\\Columns\\TextColumn::make('created_at')\r\n                    ->label('Ditambahkan')\r\n                    ->dateTime('d M Y'),\r\n            ]);\r\n    }\r\n}\r\n"
        }
    ]
}