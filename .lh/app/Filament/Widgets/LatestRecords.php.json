{
    "sourceFile": "app/Filament/Widgets/LatestRecords.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 3,
            "patches": [
                {
                    "date": 1754703977486,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1754704605165,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,30 +2,72 @@\n \r\n namespace App\\Filament\\Widgets;\r\n \r\n use App\\Models\\Culture;\r\n-use App\\Models\\Product;\r\n+// use App\\Models\\Product;\r\n+// use App\\Models\\Gallery;\r\n+use App\\Models\\GalleryCategory;\r\n+use App\\Models\\Products;\r\n+use Illuminate\\Support\\Collection;\r\n use Filament\\Tables;\r\n use Filament\\Widgets\\TableWidget as BaseWidget;\r\n use Filament\\Tables\\Columns\\TextColumn;\r\n \r\n class LatestRecords extends BaseWidget\r\n {\r\n-    protected int | string | array $columnSpan = 'full';\r\n+    protected int|string|array $columnSpan = 'full';\r\n \r\n     public function table(Tables\\Table $table): Tables\\Table\r\n     {\r\n+        // Gabungkan semua data dari model yang berbeda\r\n+        $records = collect()\r\n+            ->merge(\r\n+                Culture::select('id', 'name', 'created_at')\r\n+                    ->latest()\r\n+                    ->take(5)\r\n+                    ->get()\r\n+                    ->map(fn ($item) => [\r\n+                        'type' => 'Culture',\r\n+                        'name' => $item->name,\r\n+                        'created_at' => $item->created_at,\r\n+                    ])\r\n+            )\r\n+            ->merge(\r\n+                Products::select('id', 'name', 'created_at')\r\n+                    ->latest()\r\n+                    ->take(5)\r\n+                    ->get()\r\n+                    ->map(fn ($item) => [\r\n+                        'type' => 'Product',\r\n+                        'name' => $item->name,\r\n+                        'created_at' => $item->created_at,\r\n+                    ])\r\n+            )\r\n+            ->merge(\r\n+                GalleryCategory::select('id', 'name', 'created_at')\r\n+                    ->latest()\r\n+                    ->take(5)\r\n+                    ->get()\r\n+                    ->map(fn ($item) => [\r\n+                        'type' => 'Gallery',\r\n+                        'name' => $item->title,\r\n+                        'created_at' => $item->created_at,\r\n+                    ])\r\n+            )\r\n+            ->sortByDesc('created_at')\r\n+            ->take(10); // Ambil total 10 terbaru\r\n+\r\n         return $table\r\n             ->query(\r\n-                Culture::latest()->take(5)\r\n+                // Gunakan query kosong karena kita akan inject data manual\r\n+                Culture::query()->whereRaw('0 = 1')\r\n             )\r\n             ->columns([\r\n-                TextColumn::make('name')\r\n-                    ->label('Culture Name')\r\n-                    ->searchable()\r\n-                    ->sortable(),\r\n-                TextColumn::make('created_at')\r\n-                    ->label('Tanggal')\r\n-                    ->dateTime(),\r\n-            ]);\r\n+                TextColumn::make('type')->label('Type')->sortable(),\r\n+                TextColumn::make('name')->label('Name')->sortable(),\r\n+                TextColumn::make('created_at')->label('Tanggal')->dateTime(),\r\n+            ])\r\n+            ->paginated(false) // biar semua tampil tanpa pagination\r\n+            ->contentGrid([]) // biar tidak ber-format card\r\n+            ->records($records); // inject data hasil gabungan\r\n     }\r\n }\r\n"
                },
                {
                    "date": 1754704754648,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,27 @@\n+<?php\r\n+\r\n+namespace App\\Filament\\Widgets;\r\n+\r\n+use App\\Models\\Culture;\r\n+// use App\\Models\\Product;\r\n+use App\\Models\\Facility;\r\n+// use App\\Models\\Package;\r\n+use App\\Models\\Packages;\r\n+use App\\Models\\Products;\r\n+use Filament\\Widgets\\Widget;\r\n+\r\n+class LatestRecords extends Widget\r\n+{\r\n+    protected static string $view = 'filament.widgets.latest-records';\r\n+    protected int|string|array $columnSpan = 'full';\r\n+\r\n+    public function getLatestData(): array\r\n+    {\r\n+        return [\r\n+            'Cultures'  => Culture::latest()->take(5)->get(),\r\n+            'Products'  => Products::latest()->take(5)->get(),\r\n+            'Facilities'=> Facility::latest()->take(5)->get(),\r\n+            'Packages'  => Packages::latest()->take(5)->get(),\r\n+        ];\r\n+    }\r\n+}\r\n"
                },
                {
                    "date": 1754704859094,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,8 +5,9 @@\n use App\\Models\\Culture;\r\n // use App\\Models\\Product;\r\n use App\\Models\\Facility;\r\n // use App\\Models\\Package;\r\n+use App\\Models\\GalleryCategory;\r\n use App\\Models\\Packages;\r\n use App\\Models\\Products;\r\n use Filament\\Widgets\\Widget;\r\n \r\n@@ -21,80 +22,8 @@\n             'Cultures'  => Culture::latest()->take(5)->get(),\r\n             'Products'  => Products::latest()->take(5)->get(),\r\n             'Facilities'=> Facility::latest()->take(5)->get(),\r\n             'Packages'  => Packages::latest()->take(5)->get(),\r\n+            'Gallery' => GalleryCategory::latest()->take(5)->get(),\r\n         ];\r\n     }\r\n }\r\n-<?php\r\n-\r\n-namespace App\\Filament\\Widgets;\r\n-\r\n-use App\\Models\\Culture;\r\n-// use App\\Models\\Product;\r\n-// use App\\Models\\Gallery;\r\n-use App\\Models\\GalleryCategory;\r\n-use App\\Models\\Products;\r\n-use Illuminate\\Support\\Collection;\r\n-use Filament\\Tables;\r\n-use Filament\\Widgets\\TableWidget as BaseWidget;\r\n-use Filament\\Tables\\Columns\\TextColumn;\r\n-\r\n-class LatestRecords extends BaseWidget\r\n-{\r\n-    protected int|string|array $columnSpan = 'full';\r\n-\r\n-    public function table(Tables\\Table $table): Tables\\Table\r\n-    {\r\n-        // Gabungkan semua data dari model yang berbeda\r\n-        $records = collect()\r\n-            ->merge(\r\n-                Culture::select('id', 'name', 'created_at')\r\n-                    ->latest()\r\n-                    ->take(5)\r\n-                    ->get()\r\n-                    ->map(fn ($item) => [\r\n-                        'type' => 'Culture',\r\n-                        'name' => $item->name,\r\n-                        'created_at' => $item->created_at,\r\n-                    ])\r\n-            )\r\n-            ->merge(\r\n-                Products::select('id', 'name', 'created_at')\r\n-                    ->latest()\r\n-                    ->take(5)\r\n-                    ->get()\r\n-                    ->map(fn ($item) => [\r\n-                        'type' => 'Product',\r\n-                        'name' => $item->name,\r\n-                        'created_at' => $item->created_at,\r\n-                    ])\r\n-            )\r\n-            ->merge(\r\n-                GalleryCategory::select('id', 'name', 'created_at')\r\n-                    ->latest()\r\n-                    ->take(5)\r\n-                    ->get()\r\n-                    ->map(fn ($item) => [\r\n-                        'type' => 'Gallery',\r\n-                        'name' => $item->title,\r\n-                        'created_at' => $item->created_at,\r\n-                    ])\r\n-            )\r\n-            ->sortByDesc('created_at')\r\n-            ->take(10); // Ambil total 10 terbaru\r\n-\r\n-        return $table\r\n-            ->query(\r\n-                // Gunakan query kosong karena kita akan inject data manual\r\n-                Culture::query()->whereRaw('0 = 1')\r\n-            )\r\n-            ->columns([\r\n-                TextColumn::make('type')->label('Type')->sortable(),\r\n-                TextColumn::make('name')->label('Name')->sortable(),\r\n-                TextColumn::make('created_at')->label('Tanggal')->dateTime(),\r\n-            ])\r\n-            ->paginated(false) // biar semua tampil tanpa pagination\r\n-            ->contentGrid([]) // biar tidak ber-format card\r\n-            ->records($records); // inject data hasil gabungan\r\n-    }\r\n-}\r\n"
                }
            ],
            "date": 1754703977486,
            "name": "Commit-0",
            "content": "<?php\r\n\r\nnamespace App\\Filament\\Widgets;\r\n\r\nuse App\\Models\\Culture;\r\nuse App\\Models\\Product;\r\nuse Filament\\Tables;\r\nuse Filament\\Widgets\\TableWidget as BaseWidget;\r\nuse Filament\\Tables\\Columns\\TextColumn;\r\n\r\nclass LatestRecords extends BaseWidget\r\n{\r\n    protected int | string | array $columnSpan = 'full';\r\n\r\n    public function table(Tables\\Table $table): Tables\\Table\r\n    {\r\n        return $table\r\n            ->query(\r\n                Culture::latest()->take(5)\r\n            )\r\n            ->columns([\r\n                TextColumn::make('name')\r\n                    ->label('Culture Name')\r\n                    ->searchable()\r\n                    ->sortable(),\r\n                TextColumn::make('created_at')\r\n                    ->label('Tanggal')\r\n                    ->dateTime(),\r\n            ]);\r\n    }\r\n}\r\n"
        }
    ]
}